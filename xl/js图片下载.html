<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<title>图片下载</title>
	</head>
	<style>
		
	</style>

	<body>
		<div id="down">
			<img src="https://kuxuan-ldyx.oss-cn-beijing.aliyuncs.com/wx_group_code/yys_wx_code.jpeg" class="img1"></img>
			<input type="button" value="download_image" onclick="downloadIamge('.img1','https://kuxuan-ldyx.oss-cn-beijing.aliyuncs.com/wx_group_code/yys_wx_code.jpeg')">  
		</div>
	</body>

</html>
<script>
	function downloadIamge(selector, name) {  
	    // 通过选择器获取img元素，  
	    var img = document.querySelector(selector)  
	    // 将图片的src属性作为URL地址  
	    var url = img.src  
	    var a = document.createElement('a')  
	    var event = new MouseEvent('click')  
	      
	    a.download = name || '下载图片名称'  
	    a.href = url  
	      
	    a.dispatchEvent(event)  
	}
	
	
	
//	function downloadIamge(selector, name) {
//  var image = new Image()
//  // 解决跨域 Canvas 污染问题
//  image.setAttribute('crossOrigin', 'anonymous')
//  image.onload = function () {
//      var canvas = document.createElement('canvas')
//      canvas.width = image.width
//      canvas.height = image.height
//
//      var context = canvas.getContext('2d')
//      context.drawImage(image, 0, 0, image.width, image.height)
//      var url = canvas.toDataURL('image/png')
//
//      // 生成一个a元素
//      var a = document.createElement('a')
//      // 创建一个单击事件
//      var event = new MouseEvent('click')
//
//      // 将a的download属性设置为我们想要下载的图片名称，若name不存在则使用‘下载图片名称’作为默认名称
//      a.download = name || '下载图片名称'
//      // 将生成的URL设置为a.href属性
//      a.href = url
//
//      // 触发a的单击事件
//      a.dispatchEvent(event)
//  }
//
//  image.src = document.querySelector(selector).src
//}

// 调用方式
// 参数一： 选择器，代表img标签
// 参数二： 图片名称，可选
//downloadIamge('canvas', 'HBuilder.png')
</script>